<mat-toolbar>
  <span>Sell</span>
</mat-toolbar>
<div class="row items-center content-center">
  <div class="column w-100 p-16 table-container">
    <mat-table [dataSource]="productList$ | async">
      <!-- Position Column -->
      <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef> Book name </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{ element.name }} </mat-cell>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="author">
        <mat-header-cell *matHeaderCellDef> Author </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{ element.author }} </mat-cell>
      </ng-container>

      <!-- genre Column -->
      <ng-container matColumnDef="genre">
        <mat-header-cell *matHeaderCellDef> Genre </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="column">
            <span *ngFor="let item of element.genre">
              {{ item }}
            </span>
          </div>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="language">
        <mat-header-cell *matHeaderCellDef> Language </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{ element.language }} </mat-cell>
      </ng-container>
      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <div class="row items-center">
            <div class="mr-16">
              <mat-form-field class="qty-input" appearance="fill">
                <mat-label>Qty.</mat-label>
                <input class="quantity-input" type="number" matInput #input [disabled]="element.quantity < 1" />
              </mat-form-field>
            </div>

            <ng-container *ngIf="element.quantity < 1; else elseTemplate">
              Unavailable
            </ng-container>
            <ng-template #elseTemplate>
              <button
                class="add-product-button"
                [disabled]="input?.value < 1"
                color="primary"
                mat-flat-button
                (click)="addProductToCart(element, input.value)"
              >
                ADD
              </button>
            </ng-template>
          </div>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row class="py-16" *matRowDef="let row; columns: displayedColumns"></mat-row>
    </mat-table>
    <div
      *ngIf="loading$ | async"
      class="loading-container over-loading column items-center content-center"
    >
      <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
    </div>
    <mat-paginator
      (page)="onPageEvent($event)"
      [length]="100"
      [pageSize]="PageConfig.ITEMS_PER_PAGE"
    >
    </mat-paginator>
  </div>
</div>
